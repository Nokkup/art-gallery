(this["webpackJsonpart-gallery"]=this["webpackJsonpart-gallery"]||[]).push([[0],{10:function(e,t,a){e.exports={footer:"Footer_footer__88hCD",footer__year:"Footer_footer__year__3CGNT",footer__link:"Footer_footer__link__U5Kzo"}},11:function(e,t,a){e.exports={main:"Error_main__1q5Sp",error:"Error_error__1oj8V",error__message:"Error_error__message__1MStf"}},14:function(e,t,a){e.exports={main:"Gallery_main__1wIMm",gallery:"Gallery_gallery__pdsik"}},26:function(e,t,a){e.exports={wrapper:"App_wrapper__1GPUy"}},27:function(e,t,a){e.exports={loader:"Loader_loader__1EFvh"}},4:function(e,t,a){e.exports={gallery__card:"GalleryCard_gallery__card__2weRx",popup__content__image:"GalleryCard_popup__content__image__2SEhg",popup__content__title:"GalleryCard_popup__content__title__3syOC",popup__content__author:"GalleryCard_popup__content__author__aO180",popup__content__info:"GalleryCard_popup__content__info__3eJIf",popup__content__years:"GalleryCard_popup__content__years__Aqs5y",popup__content__tag:"GalleryCard_popup__content__tag__jDKh6"}},54:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(25),o=a.n(c),s=a(3),_=a(5),i=a(7),l=a.n(i),p=l.a.create({baseURL:"https://collectionapi.metmuseum.org/public/collection/v1",responseType:"json"}),u=a(26),d=a.n(u),j=a(14),b=a.n(j),m=a(4),h=a.n(m),f=a(6),O=a.n(f),g=a(0);var x=function(e){var t=e.isActive,a=e.setActive,r=e.children;return t&&Object(g.jsx)("div",{className:O.a.popup,onClick:function(){return a(!1)},children:Object(g.jsx)("div",{className:O.a.popup__body,children:Object(g.jsxs)("div",{className:O.a.popup__content,onClick:function(e){return e.stopPropagation()},children:[Object(g.jsx)("span",{className:O.a.popup__close,onClick:function(){return a(!1)},onKeyDown:function(e){13===e.keyCode&&a(!1)},tabIndex:3,children:"\xd7"}),r]})})})},y=function(e){var t=e.id,a=Object(r.useState)({}),n=Object(s.a)(a,2),c=n[0],o=n[1],_=Object(r.useState)(!1),i=Object(s.a)(_,2),l=i[0],u=i[1];Object(r.useEffect)((function(){var e={};p.get("/objects/".concat(t)).then((function(t){e.imageSmallSize=t.data.primaryImageSmall,e.imageFullSize=t.data.primaryImage,e.author=t.data.artistDisplayName,e.title=t.data.title,e.wiki=t.data.artistWikidata_URL,t.data.objectBeginDate!==t.data.objectEndDate?e.years="".concat(t.data.objectBeginDate," \u2014 ").concat(t.data.objectEndDate):e.years=t.data.objectBeginDate,t.data.tags&&(e.tags=t.data.tags.map((function(e){return e.term}))),o(e)}))}),[t]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{className:h.a.gallery__card,src:c.imageSmallSize,alt:c.title,onClick:function(){return u(!0)},onKeyDown:function(e){13===e.keyCode&&u(!0)},tabIndex:3}),Object(g.jsxs)(x,{isActive:l,setActive:u,children:[Object(g.jsx)("img",{className:h.a.popup__image,src:c.imageSmallSize,alt:c.title}),c.title&&Object(g.jsx)("p",{className:h.a.popup__content__title,children:c.title}),c.author&&Object(g.jsx)("p",{className:h.a.popup__content__author,children:c.author}),c.years&&Object(g.jsx)("p",{className:h.a.popup__content__years,children:c.years}),c.wiki&&Object(g.jsx)("p",{children:Object(g.jsx)("a",{className:h.a.popup__content__url,href:c.wiki,target:"_blank",rel:"noreferrer",children:"Wikidata Page"})}),c.imageFullSize&&Object(g.jsx)("p",{children:Object(g.jsx)("a",{className:h.a.popup__content__url,href:c.imageFullSize,target:"_blank",rel:"noreferrer",children:"Full size"})}),c.tags&&c.tags.map((function(e,t){return Object(g.jsx)("span",{className:h.a.popup__content__tag,children:e},t)})),Object.keys(c).some((function(e){return c[e]}))?null:Object(g.jsx)("p",{className:h.a.popup__content__info,children:"No information about this item"})]})]})},v=a(8),N=a.n(v),k=function(e){var t=e.departments,a=e.selected,r=e.setDepartment,n=e.setRefresh;return Object(g.jsxs)("div",{className:N.a.selector,children:[Object(g.jsx)("select",{className:N.a.selector__select,value:a,onChange:function(e){return r(e.target.value)},tabIndex:2,children:t.map((function(e,t){return Object(g.jsx)("option",{value:e.departmentId,children:e.displayName},t)}))}),Object(g.jsx)("button",{className:N.a.selector__button,onClick:n,tabIndex:1,children:"Refresh"})]})},S=a(27),C=a.n(S),I=function(){return Object(g.jsx)("div",{className:C.a.loader,children:Object(g.jsx)("div",{})})},w=function(e){var t=e.idsList,a=e.departments,n=Object(r.useState)(19),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(r.useState)([]),p=Object(s.a)(l,2),u=p[0],d=p[1],j=Object(r.useState)(!1),m=Object(s.a)(j,2),h=m[0],f=m[1],O=Object(_.usePromiseTracker)().promiseInProgress;Object(r.useEffect)((function(){u.length&&!h||(!function(){var e=[];if(t&&t[o]){for(var a=0;a<6;a++){var r=Math.floor(Math.random()*t[o].length);e.push(t[o][r])}d(e)}}(),f(!1))}),[o,t,h,u]);return Object(g.jsx)("div",{className:b.a.main,children:O?Object(g.jsx)(I,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{departments:a,selected:o,setDepartment:function(e){i(e),f(!0)},setRefresh:function(){f(!0)}}),Object(g.jsx)("div",{className:b.a.gallery,children:u.map((function(e,t){return Object(g.jsx)(y,{id:e},t)}))})]})})},E=a(9),D=a.n(E),G=function(){return Object(g.jsxs)("div",{className:D.a.header,children:[Object(g.jsx)("div",{className:D.a.header__logo,children:Object(g.jsx)("a",{href:"https://github.com/Nokkup/art-gallery",tabIndex:-1,children:Object(g.jsx)("img",{src:"logo.svg",alt:"logo"})})}),Object(g.jsx)("h1",{className:D.a.header__title,children:"The Metropolitan Museum of Art Collection"})]})},F=a(10),P=a.n(F),z=function(){return Object(g.jsxs)("div",{className:P.a.footer,children:[Object(g.jsx)("span",{className:P.a.footer__year,children:"2021"}),Object(g.jsx)("a",{className:P.a.footer__link,href:"https://github.com/Nokkup/art-gallery",children:"Github link"})]})},M=a(11),A=a.n(M),R=function(){return Object(g.jsx)("div",{className:A.a.main,children:Object(g.jsx)("div",{className:A.a.error,children:Object(g.jsx)("p",{className:A.a.error__message,children:":( Ooops, something went wrong"})})})},q=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({}),o=Object(s.a)(c,2),i=o[0],u=o[1],j=Object(r.useState)(!1),b=Object(s.a)(j,2),m=b[0],h=b[1];return Object(r.useEffect)((function(){var e={},t=[];Object(_.trackPromise)(p.get("/departments").then((function(e){return n(e.data.departments),e.data.departments})).then((function(a){a.forEach((function(e){t.push(p.get("/search",{params:{departmentId:e.departmentId,hasImages:!0,q:"art"}}))})),Object(_.trackPromise)(l.a.all(t).then((function(t){t.forEach((function(t){return e[t.config.params.departmentId]=t.data.objectIDs})),u(e)})))}))).catch((function(){h(!0)}))}),[]),Object(g.jsxs)("div",{className:d.a.wrapper,children:[Object(g.jsx)(G,{}),m?Object(g.jsx)(R,{}):Object(g.jsx)(w,{idsList:i,departments:a}),Object(g.jsx)(z,{})]})};o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(q,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={popup:"Popup_popup__38F1p",popup__body:"Popup_popup__body__2Wt9I",popup__content:"Popup_popup__content__3rEjS",popup__close:"Popup_popup__close__1dwSW"}},8:function(e,t,a){e.exports={selector:"Selector_selector__NbqT8",selector__button:"Selector_selector__button__3SbyJ",selector__select:"Selector_selector__select__2G-yM"}},9:function(e,t,a){e.exports={header:"Header_header__uy9FP",header__title:"Header_header__title__2qIZ0",header__logo:"Header_header__logo__3kh4u"}}},[[54,1,2]]]);
//# sourceMappingURL=main.d2941596.chunk.js.map