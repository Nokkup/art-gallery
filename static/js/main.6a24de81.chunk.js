(this["webpackJsonpart-gallery"]=this["webpackJsonpart-gallery"]||[]).push([[0],{10:function(e,t,a){e.exports={error:"Error_error__3RJ5W",error__message:"Error_error__message__PGQd2"}},13:function(e,t,a){e.exports={gallery:"Gallery_gallery__3Rfk1"}},26:function(e,t,a){e.exports={wrapper:"App_wrapper__EjGk6"}},27:function(e,t,a){e.exports={loader:"Loader_loader__1Ugvn"}},4:function(e,t,a){e.exports={gallery__card:"GalleryCard_gallery__card__3Esif",gallery__popup__card:"GalleryCard_gallery__popup__card__2h9pj",gallery__popup__image:"GalleryCard_gallery__popup__image__SwVyy",gallery__popup__title:"GalleryCard_gallery__popup__title__5xbGp",gallery__popup__author:"GalleryCard_gallery__popup__author__1Oac2",gallery__popup__url:"GalleryCard_gallery__popup__url__1sy0i",gallery__popup__years:"GalleryCard_gallery__popup__years__1DFJ4",gallery__popup__tag:"GalleryCard_gallery__popup__tag__2_9TW"}},5:function(e,t,a){e.exports={popup:"Popup_popup__3-IPG",popup__body:"Popup_popup__body__3qIno",popup__content:"Popup_popup__content__3NLmC",popup__close:"Popup_popup__close__30UTm"}},54:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(24),l=a.n(n),s=a(3),o=a(6),_=a(25),i=a.n(_).a.create({baseURL:"https://collectionapi.metmuseum.org/public/collection/v1",responseType:"json"}),p=a(26),u=a.n(p),d=a(13),j=a.n(d),m=a(4),b=a.n(m),g=a(5),h=a.n(g),f=a(0),O=function(e){var t=e.isActive,a=e.setActive,r=e.children;return t&&Object(f.jsx)("div",{className:h.a.popup,onClick:function(){return a(!1)},children:Object(f.jsx)("div",{className:h.a.popup__body,children:Object(f.jsxs)("div",{className:h.a.popup__content,onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("span",{className:h.a.popup__close,onClick:function(){return a(!1)},onKeyDown:function(e){13===e.keyCode&&a(!1)},tabIndex:3,children:"\xd7"}),r]})})})},y=function(e){var t=e.id,a=Object(r.useState)({}),c=Object(s.a)(a,2),n=c[0],l=c[1],o=Object(r.useState)(!1),_=Object(s.a)(o,2),p=_[0],u=_[1];Object(r.useEffect)((function(){var e={};i.get("/objects/".concat(t)).then((function(t){var a;e.imageSmallSize=t.data.primaryImageSmall,e.imageFullSize=t.data.primaryImage,e.author=t.data.artistDisplayName,e.title=t.data.title,e.wiki=t.data.artistWikidata_URL,t.data.objectBeginDate!==t.data.objectEndDate?e.years="".concat(t.data.objectBeginDate," \u2014 ").concat(t.data.objectEndDate):e.years=t.data.objectBeginDate,e.tags=(null===(a=t.data.tags)||void 0===a?void 0:a.map((function(e){return e.term})))||[],l(e)}))}),[t]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:b.a.gallery__card,src:n.imageSmallSize,alt:n.title,onClick:function(){return u(!0)},onKeyDown:function(e){13===e.keyCode&&u(!0)},tabIndex:3}),Object(f.jsx)(O,{isActive:p,setActive:u,children:Object(f.jsx)("div",{className:b.a.gallery__popup__card,children:Object(f.jsxs)("figure",{children:[Object(f.jsx)("img",{className:b.a.gallery__popup__image,src:n.imageSmallSize,alt:n.title}),Object(f.jsxs)("figcaption",{children:[Object(f.jsx)("p",{className:b.a.gallery__popup__title,children:n.title||"unknown"}),Object(f.jsx)("p",{className:b.a.gallery__popup__author,children:n.author||"unknown"}),Object(f.jsx)("p",{className:b.a.gallery__popup__years,children:n.years||"undated"})]}),n.wiki&&Object(f.jsx)("p",{children:Object(f.jsx)("a",{className:b.a.gallery__popup__url,href:n.wiki,target:"_blank",rel:"noreferrer",children:"Wiki Page"})}),n.imageFullSize&&Object(f.jsx)("p",{children:Object(f.jsx)("a",{className:b.a.gallery__popup__url,href:n.imageFullSize,target:"_blank",rel:"noreferrer",children:"Full size"})}),n.tags&&n.tags.map((function(e,t){return Object(f.jsx)("span",{className:b.a.gallery__popup__tag,children:e},t)}))]})})})]})},x=a(7),v=a.n(x),N=function(e){var t=e.departments,a=e.selected,r=e.setDepartment,c=e.setRefresh;return Object(f.jsxs)("div",{className:v.a.selector,children:[Object(f.jsx)("select",{className:v.a.selector__select,value:a,onChange:function(e){return r(e.target.value)},tabIndex:2,children:t.map((function(e,t){return Object(f.jsx)("option",{value:e.departmentId,children:e.displayName},t)}))}),Object(f.jsx)("button",{className:v.a.selector__button,onClick:c,tabIndex:1,children:"Refresh"})]})},k=a(27),I=a.n(k),S=function(){return Object(f.jsx)("div",{className:I.a.loader,children:Object(f.jsx)("div",{})})},C=function(e){var t=e.idsList,a=e.departments,c=Object(r.useState)(19),n=Object(s.a)(c,2),l=n[0],_=n[1],i=Object(r.useState)([]),p=Object(s.a)(i,2),u=p[0],d=p[1],m=Object(r.useState)(!1),b=Object(s.a)(m,2),g=b[0],h=b[1],O=Object(o.usePromiseTracker)().promiseInProgress;Object(r.useEffect)((function(){u.length&&!g||(!function(){var e=[];if(t&&t[l]){for(var a=0;a<6;a++){var r=Math.floor(Math.random()*t[l].length);e.push(t[l][r])}d(e)}}(),h(!1))}),[l,t,g,u]);return Object(f.jsx)("div",{className:j.a.main,children:O?Object(f.jsx)(S,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{departments:a,selected:l,setDepartment:function(e){_(e),h(!0)},setRefresh:function(){h(!0)}}),Object(f.jsx)("div",{className:j.a.gallery,children:u.map((function(e,t){return Object(f.jsx)(y,{id:e},t)}))})]})})},w=a(8),P=a.n(w),D=function(){return Object(f.jsxs)("div",{className:P.a.header,children:[Object(f.jsx)("div",{className:P.a.header__logo,children:Object(f.jsx)("a",{href:"https://github.com/Nokkup/art-gallery",tabIndex:-1,children:Object(f.jsx)("img",{src:"logo.svg",alt:"logo"})})}),Object(f.jsx)("h1",{className:P.a.header__title,children:"The Metropolitan Museum of Art Collection"})]})},G=a(9),E=a.n(G),F=function(){return Object(f.jsxs)("div",{className:E.a.footer,children:[Object(f.jsx)("span",{className:E.a.footer__year,children:"2021"}),Object(f.jsx)("a",{className:E.a.footer__link,href:"https://github.com/Nokkup/art-gallery",children:"Github link"})]})},R=a(10),z=a.n(R),A=function(){return Object(f.jsx)("div",{className:z.a.main,children:Object(f.jsx)("div",{className:z.a.error,children:Object(f.jsx)("p",{className:z.a.error__message,children:":( Ooops, something went wrong"})})})},L=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)({}),l=Object(s.a)(n,2),_=l[0],p=l[1],d=Object(r.useState)(!1),j=Object(s.a)(d,2),m=j[0],b=j[1];return Object(r.useEffect)((function(){var e={};Object(o.trackPromise)(i.get("/departments").then((function(e){return c(e.data.departments),e.data.departments})).then((function(t){var a=0;t.forEach((function(e){"Photographs"===e.displayName&&(a=e.departmentId)})),i.get("/search",{params:{departmentId:a,hasImages:!0,q:"art"}}).then((function(t){e[t.config.params.departmentId]=t.data.objectIDs,p(e)}));var r=t.filter((function(e){return e.departmentId!==a}));setTimeout((function(t){t.forEach((function(t){i.get("/search",{params:{departmentId:t.departmentId,hasImages:!0,q:"art"}}).then((function(t){e[t.config.params.departmentId]=t.data.objectIDs,p(e)}))}))}),3e3,r)}))).catch((function(){b(!0)}))}),[]),Object(f.jsxs)("div",{className:u.a.wrapper,children:[Object(f.jsx)(D,{}),m?Object(f.jsx)(A,{}):Object(f.jsx)(C,{idsList:_,departments:a}),Object(f.jsx)(F,{})]})};l.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(L,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={selector:"Selector_selector__2Zwm_",selector__select:"Selector_selector__select__M5c9U",selector__button:"Selector_selector__button__2mAYM"}},8:function(e,t,a){e.exports={header:"Header_header__PBxuQ",header__title:"Header_header__title__oL0Rd",header__logo:"Header_header__logo__DnxbJ"}},9:function(e,t,a){e.exports={footer:"Footer_footer__3ZPh2",footer__link:"Footer_footer__link__2dl4l",footer__year:"Footer_footer__year__O3EPd"}}},[[54,1,2]]]);
//# sourceMappingURL=main.6a24de81.chunk.js.map