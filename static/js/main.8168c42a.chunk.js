(this["webpackJsonpart-gallery"]=this["webpackJsonpart-gallery"]||[]).push([[0],{10:function(e,t,a){e.exports={main:"Error_main__3hNM0",error:"Error_error__3RJ5W",error__message:"Error_error__message__PGQd2"}},13:function(e,t,a){e.exports={main:"Gallery_main__1I2Ja",gallery:"Gallery_gallery__3Rfk1"}},26:function(e,t,a){e.exports={wrapper:"App_wrapper__EjGk6"}},27:function(e,t,a){e.exports={loader:"Loader_loader__1Ugvn"}},4:function(e,t,a){e.exports={gallery__card:"GalleryCard_gallery__card__3Esif",gallery__popup__card:"GalleryCard_gallery__popup__card__2h9pj",gallery__popup__image:"GalleryCard_gallery__popup__image__SwVyy",gallery__popup__title:"GalleryCard_gallery__popup__title__5xbGp",gallery__popup__author:"GalleryCard_gallery__popup__author__1Oac2",gallery__popup__info:"GalleryCard_gallery__popup__info__3d6iG",gallery__popup__years:"GalleryCard_gallery__popup__years__1DFJ4",gallery__popup__tag:"GalleryCard_gallery__popup__tag__2_9TW"}},5:function(e,t,a){e.exports={popup:"Popup_popup__3-IPG",popup__body:"Popup_popup__body__3qIno",popup__content:"Popup_popup__content__3NLmC",popup__close:"Popup_popup__close__30UTm"}},54:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(24),o=a.n(c),l=a(3),s=a(6),_=a(25),i=a.n(_).a.create({baseURL:"https://collectionapi.metmuseum.org/public/collection/v1",responseType:"json"}),p=a(26),d=a.n(p),u=a(13),j=a.n(u),m=a(4),b=a.n(m),g=a(5),h=a.n(g),f=a(0),O=function(e){var t=e.isActive,a=e.setActive,r=e.children;return t&&Object(f.jsx)("div",{className:h.a.popup,onClick:function(){return a(!1)},children:Object(f.jsx)("div",{className:h.a.popup__body,children:Object(f.jsxs)("div",{className:h.a.popup__content,onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("span",{className:h.a.popup__close,onClick:function(){return a(!1)},onKeyDown:function(e){13===e.keyCode&&a(!1)},tabIndex:3,children:"\xd7"}),r]})})})},y=function(e){var t=e.id,a=Object(r.useState)({}),n=Object(l.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(!1),_=Object(l.a)(s,2),p=_[0],d=_[1];Object(r.useEffect)((function(){var e={};i.get("/objects/".concat(t)).then((function(t){var a;e.imageSmallSize=t.data.primaryImageSmall,e.imageFullSize=t.data.primaryImage,e.author=t.data.artistDisplayName,e.title=t.data.title,e.wiki=t.data.artistWikidata_URL,t.data.objectBeginDate!==t.data.objectEndDate?e.years="".concat(t.data.objectBeginDate," \u2014 ").concat(t.data.objectEndDate):e.years=t.data.objectBeginDate,e.tags=(null===(a=t.data.tags)||void 0===a?void 0:a.map((function(e){return e.term})))||[],o(e)}))}),[t]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:b.a.gallery__card,src:c.imageSmallSize,alt:c.title,onClick:function(){return d(!0)},onKeyDown:function(e){13===e.keyCode&&d(!0)},tabIndex:3}),Object(f.jsx)(O,{isActive:p,setActive:d,children:Object(f.jsx)("div",{className:b.a.gallery__popup__card,children:Object(f.jsxs)("figure",{children:[Object(f.jsx)("img",{className:b.a.gallery__popup__image,src:c.imageSmallSize,alt:c.title}),Object(f.jsxs)("figcaption",{children:[Object(f.jsx)("p",{className:b.a.gallery__popup__title,children:c.title||"unknown"}),Object(f.jsx)("p",{className:b.a.gallery__popup__author,children:c.author||"unknown"}),Object(f.jsx)("p",{className:b.a.gallery__popup__years,children:c.years||"undated"})]}),c.wiki&&Object(f.jsx)("p",{children:Object(f.jsx)("a",{className:b.a.gallery__popup__url,href:c.wiki,target:"_blank",rel:"noreferrer",children:"Wiki Page"})}),c.imageFullSize&&Object(f.jsx)("p",{children:Object(f.jsx)("a",{className:b.a.gallery__popup__url,href:c.imageFullSize,target:"_blank",rel:"noreferrer",children:"Full size"})}),c.tags&&c.tags.map((function(e,t){return Object(f.jsx)("span",{className:b.a.gallery__popup__tag,children:e},t)}))]})})})]})},x=a(7),v=a.n(x),N=function(e){var t=e.departments,a=e.selected,r=e.setDepartment,n=e.setRefresh;return Object(f.jsxs)("div",{className:v.a.selector,children:[Object(f.jsx)("select",{className:v.a.selector__select,value:a,onChange:function(e){return r(e.target.value)},tabIndex:2,children:t.map((function(e,t){return Object(f.jsx)("option",{value:e.departmentId,children:e.displayName},t)}))}),Object(f.jsx)("button",{className:v.a.selector__button,onClick:n,tabIndex:1,children:"Refresh"})]})},k=a(27),I=a.n(k),S=function(){return Object(f.jsx)("div",{className:I.a.loader,children:Object(f.jsx)("div",{})})},C=function(e){var t=e.idsList,a=e.departments,n=Object(r.useState)(19),c=Object(l.a)(n,2),o=c[0],_=c[1],i=Object(r.useState)([]),p=Object(l.a)(i,2),d=p[0],u=p[1],m=Object(r.useState)(!1),b=Object(l.a)(m,2),g=b[0],h=b[1],O=Object(s.usePromiseTracker)().promiseInProgress;Object(r.useEffect)((function(){d.length&&!g||(!function(){var e=[];if(t&&t[o]){for(var a=0;a<6;a++){var r=Math.floor(Math.random()*t[o].length);e.push(t[o][r])}u(e)}}(),h(!1))}),[o,t,g,d]);return Object(f.jsx)("div",{className:j.a.main,children:O?Object(f.jsx)(S,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{departments:a,selected:o,setDepartment:function(e){_(e),h(!0)},setRefresh:function(){h(!0)}}),Object(f.jsx)("div",{className:j.a.gallery,children:d.map((function(e,t){return Object(f.jsx)(y,{id:e},t)}))})]})})},w=a(8),G=a.n(w),P=function(){return Object(f.jsxs)("div",{className:G.a.header,children:[Object(f.jsx)("div",{className:G.a.header__logo,children:Object(f.jsx)("a",{href:"https://github.com/Nokkup/art-gallery",tabIndex:-1,children:Object(f.jsx)("img",{src:"logo.svg",alt:"logo"})})}),Object(f.jsx)("h1",{className:G.a.header__title,children:"The Metropolitan Museum of Art Collection"})]})},D=a(9),E=a.n(D),F=function(){return Object(f.jsxs)("div",{className:E.a.footer,children:[Object(f.jsx)("span",{className:E.a.footer__year,children:"2021"}),Object(f.jsx)("a",{className:E.a.footer__link,href:"https://github.com/Nokkup/art-gallery",children:"Github link"})]})},M=a(10),R=a.n(M),z=function(){return Object(f.jsx)("div",{className:R.a.main,children:Object(f.jsx)("div",{className:R.a.error,children:Object(f.jsx)("p",{className:R.a.error__message,children:":( Ooops, something went wrong"})})})},A=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({}),o=Object(l.a)(c,2),_=o[0],p=o[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),m=j[0],b=j[1];return Object(r.useEffect)((function(){var e={};Object(s.trackPromise)(i.get("/departments").then((function(e){return n(e.data.departments),e.data.departments})).then((function(t){var a=0;t.forEach((function(e){"Photographs"===e.displayName&&(a=e.departmentId)})),i.get("/search",{params:{departmentId:a,hasImages:!0,q:"art"}}).then((function(t){e[t.config.params.departmentId]=t.data.objectIDs,p(e)}));var r=t.filter((function(e){return e.departmentId!==a}));setTimeout((function(t){t.forEach((function(t){i.get("/search",{params:{departmentId:t.departmentId,hasImages:!0,q:"art"}}).then((function(t){e[t.config.params.departmentId]=t.data.objectIDs,p(e)}))}))}),3e3,r)}))).catch((function(){b(!0)}))}),[]),Object(f.jsxs)("div",{className:d.a.wrapper,children:[Object(f.jsx)(P,{}),m?Object(f.jsx)(z,{}):Object(f.jsx)(C,{idsList:_,departments:a}),Object(f.jsx)(F,{})]})};o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={selector:"Selector_selector__2Zwm_",selector__button:"Selector_selector__button__2mAYM",selector__select:"Selector_selector__select__M5c9U"}},8:function(e,t,a){e.exports={header:"Header_header__PBxuQ",header__title:"Header_header__title__oL0Rd",header__logo:"Header_header__logo__DnxbJ"}},9:function(e,t,a){e.exports={footer:"Footer_footer__3ZPh2",footer__year:"Footer_footer__year__O3EPd",footer__link:"Footer_footer__link__2dl4l"}}},[[54,1,2]]]);
//# sourceMappingURL=main.8168c42a.chunk.js.map