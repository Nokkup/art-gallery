{"version":3,"sources":["components/Footer/Footer.module.scss","components/Gallery/Gallery.module.scss","App.module.scss","components/Loader/Loader.module.scss","components/Gallery/GalleryCard.module.scss","api/api.js","helpers/index.js","components/Popup/Popup.jsx","components/Gallery/GalleryCardPopup.jsx","components/Gallery/GalleryCard.jsx","components/Gallery/GallerySelector.jsx","components/Loader/Loader.jsx","components/Loader/WithLoader.jsx","components/Gallery/Gallery.jsx","components/Header/Header.jsx","components/Footer/Footer.jsx","App.js","index.js","components/Popup/Popup.module.scss","components/Gallery/GallerySelector.module.scss","components/Header/Header.module.scss"],"names":["module","exports","ApiRequest","axios","create","baseURL","responseType","fetchDepartments","a","get","data","departments","status","fetchImagesListByDepartment","departmentId","params","hasImages","q","idsList","objectIDs","fetchImageInfo","imageId","information","imageSmallSize","primaryImageSmall","imageFullSize","primaryImage","author","artistDisplayName","title","wiki","artistWikidata_URL","tags","map","el","term","objectBeginDate","objectEndDate","years","getDefaultCategory","defaultCategory","filter","item","displayName","length","Popup","isActive","setActive","children","className","styles","popup","onClick","popup__body","popup__content","e","stopPropagation","popup__close","GalleryCardPopup","description","gallery__popup__card","gallery__popup__image","src","alt","gallery__popup__title","gallery__popup__author","gallery__popup__years","gallery__popup__url","href","target","rel","tag","i","gallery__popup__tag","GalleryCard","id","useState","setDescription","useEffect","info","fetchInfo","gallery__card","onKeyDown","code","tabIndex","GallerySelector","selected","setDepartment","setRefresh","selector","selector__select","value","onChange","selector__button","Loader","loader","WithLoader","isLoading","props","Gallery","currentDepartment","setCurrentDepartment","currentIDsList","setCurrentIDsList","refresh","setIsLoading","defaultDepartment","ids","randomIndex","Math","floor","random","push","setRandomImagesList","handleSetNewDepartment","newDepartment","imageIDs","main","gallery","Header","header","header__logo","header__title","Footer","footer","footer__year","footer__link","App","setDepartments","listIDsByCategory","setlistIDsByCategory","fetchData","wrapper","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.424ea64c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__3zaZc\",\"footer__link\":\"Footer_footer__link__3YHoe\",\"footer__year\":\"Footer_footer__year__227OH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__8IZt1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__1aJHy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__19VAl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery__card\":\"GalleryCard_gallery__card__BYD0s\",\"gallery__popup__card\":\"GalleryCard_gallery__popup__card__3RCTG\",\"gallery__popup__image\":\"GalleryCard_gallery__popup__image__2_VDd\",\"gallery__popup__title\":\"GalleryCard_gallery__popup__title__3sesM\",\"gallery__popup__author\":\"GalleryCard_gallery__popup__author__1XXxy\",\"gallery__popup__url\":\"GalleryCard_gallery__popup__url__1A9ba\",\"gallery__popup__years\":\"GalleryCard_gallery__popup__years__EG5S0\",\"gallery__popup__tag\":\"GalleryCard_gallery__popup__tag__3AVy_\"};","import axios from \"axios\";\r\n\r\nconst API_URL = \"https://collectionapi.metmuseum.org/public/collection/v1\";\r\n\r\nconst ApiRequest = axios.create({\r\n    baseURL: API_URL,\r\n    responseType: \"json\",\r\n});\r\n\r\nexport async function fetchDepartments() {\r\n    const data = await ApiRequest.get(\"/departments\");\r\n    const departments = data.status === 200 ? data.data.departments : [];\r\n    return departments;\r\n}\r\n\r\nexport async function fetchImagesListByDepartment(departmentId) {\r\n    const data = await ApiRequest.get(\"/search\", {\r\n        params: {\r\n            departmentId,\r\n            hasImages: true,\r\n            q: \"art\",\r\n        },\r\n    });\r\n    const idsList = data.status === 200 ? data.data.objectIDs : [];\r\n    return idsList;\r\n}\r\n\r\nexport async function fetchImageInfo(imageId) {\r\n    const data = await ApiRequest.get(`/objects/${imageId}`);\r\n    if (data.status !== 200) {\r\n        return {};\r\n    }\r\n    const information = {\r\n        imageSmallSize: data.data.primaryImageSmall,\r\n        imageFullSize: data.data.primaryImage,\r\n        author: data.data.artistDisplayName || \"unknown\",\r\n        title: data.data.title || \"unknown\",\r\n        wiki: data.data.artistWikidata_URL,\r\n        tags: data.data.tags?.map((el) => el.term) || [],\r\n    };\r\n\r\n    if (data.data.objectBeginDate !== data.data.objectEndDate) {\r\n        information.years = `${data.data.objectBeginDate} — ${data.data.objectEndDate}`;\r\n    } else {\r\n        information.years = data.data.objectBeginDate;\r\n    }\r\n    information.years = information.years || \"undated\";\r\n\r\n    return information;\r\n}\r\n","export function getDefaultCategory(departments) {\r\n    let defaultCategory = departments.filter(\r\n        (item) => item.displayName === \"European Paintings\"\r\n    )[0];\r\n    if (!defaultCategory && departments.length) {\r\n        defaultCategory = departments[0];\r\n    }\r\n    return defaultCategory;\r\n}\r\n","import styles from \"./Popup.module.scss\";\r\n\r\nconst Popup = ({ isActive, setActive, children }) => {\r\n    return (\r\n        isActive && (\r\n            <div className={styles.popup} onClick={() => setActive(false)}>\r\n                <div className={styles.popup__body}>\r\n                    <div\r\n                        className={styles.popup__content}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                        <span\r\n                            className={styles.popup__close}\r\n                            onClick={() => setActive(false)}\r\n                        >\r\n                            ×\r\n                        </span>\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    );\r\n};\r\n\r\nexport default Popup;\r\n","import React from 'react';\r\nimport Popup from '../Popup/Popup';\r\nimport styles from \"./GalleryCard.module.scss\";\r\n\r\nconst GalleryCardPopup = ({description, isActive, setActive}) => {\r\n    return (\r\n        <Popup isActive={isActive} setActive={setActive}>\r\n        <div className={styles.gallery__popup__card}>\r\n            <figure>\r\n                <img\r\n                    className={styles.gallery__popup__image}\r\n                    src={description.imageSmallSize}\r\n                    alt={description.title}\r\n                />\r\n                <figcaption>\r\n                    <p className={styles.gallery__popup__title}>\r\n                        {description.title}\r\n                    </p>\r\n                    <p className={styles.gallery__popup__author}>\r\n                        {description.author}\r\n                    </p>\r\n                    <p className={styles.gallery__popup__years}>\r\n                        {description.years}\r\n                    </p>\r\n                </figcaption>\r\n                {description.wiki && (\r\n                    <p>\r\n                        <a\r\n                            className={styles.gallery__popup__url}\r\n                            href={description.wiki}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                        >\r\n                            Wiki Page\r\n                        </a>\r\n                    </p>\r\n                )}\r\n                {description.imageFullSize && (\r\n                    <p>\r\n                        <a\r\n                            className={styles.gallery__popup__url}\r\n                            href={description.imageFullSize}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                        >\r\n                            Full size\r\n                        </a>\r\n                    </p>\r\n                )}\r\n                {description.tags &&\r\n                    description.tags.map((tag, i) => (\r\n                        <span\r\n                            className={styles.gallery__popup__tag}\r\n                            key={i}\r\n                        >\r\n                            {tag}\r\n                        </span>\r\n                    ))}\r\n            </figure>\r\n        </div>\r\n    </Popup>\r\n    )\r\n}\r\n\r\nexport default GalleryCardPopup;\r\n","import { useEffect, useState } from \"react\";\r\nimport { fetchImageInfo } from \"../../api/api\";\r\nimport styles from \"./GalleryCard.module.scss\";\r\nimport GalleryCardPopup from \"./GalleryCardPopup\";\r\n\r\nconst GalleryCard = ({ id }) => {\r\n    const [description, setDescription] = useState({});\r\n    const [isActive, setActive] = useState(false);\r\n\r\n    useEffect(() => {\r\n        async function fetchInfo() {\r\n            const info = await fetchImageInfo(id);\r\n            setDescription(info);\r\n        }\r\n        fetchInfo();\r\n    }, [id]);\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.code === \"Space\") {\r\n            setActive(true);\r\n        } else if (e.code === \"Escape\") {\r\n            setActive(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <img\r\n                className={styles.gallery__card}\r\n                src={description.imageSmallSize}\r\n                alt={description.title}\r\n                onClick={() => setActive(true)}\r\n                onKeyDown={handleKeyPress}\r\n                tabIndex={0}\r\n            />\r\n            {isActive && (\r\n                <GalleryCardPopup\r\n                    description={description}\r\n                    isActive={isActive}\r\n                    setActive={setActive}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default GalleryCard;\r\n","import styles from \"./GallerySelector.module.scss\";\r\n\r\n\r\nconst GallerySelector = ({ departments, selected, setDepartment, setRefresh }) => {\r\n    return (\r\n        <div className={styles.selector}>\r\n            <select\r\n                className={styles.selector__select}\r\n                value={selected}\r\n                onChange={e => setDepartment(e.target.value)}\r\n                tabIndex={1}\r\n            >\r\n                {\r\n                    departments.map((el, i) => <option key={i} value={el.departmentId}>{el.displayName}</option>)\r\n                }\r\n            </select>\r\n            <button className={styles.selector__button} onClick={setRefresh} tabIndex={1}>Refresh</button>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default GallerySelector;","import styles from \"./Loader.module.scss\";\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className={styles.loader}>\r\n            <div />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loader;","import React from \"react\";\r\nimport Loader from \"./Loader\";\r\n\r\nconst WithLoader = ({ isLoading, ...props }) => {\r\n    return isLoading ? <Loader /> : props.children;\r\n};\r\n\r\nexport default WithLoader;\r\n","import { useEffect, useState } from \"react\";\r\nimport styles from \"./Gallery.module.scss\";\r\nimport GalleryCard from \"./GalleryCard\";\r\nimport GallerySelector from \"./GallerySelector\";\r\nimport { getDefaultCategory } from \"../../helpers\";\r\nimport { fetchImagesListByDepartment } from \"../../api/api\";\r\nimport WithLoader from \"../Loader/WithLoader\";\r\n\r\nconst Gallery = ({ idsList, departments }) => {\r\n    const [currentDepartment, setCurrentDepartment] = useState(null);\r\n    const [currentIDsList, setCurrentIDsList] = useState([]);\r\n    const [refresh, setRefresh] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const defaultDepartment = getDefaultCategory(departments);\r\n        setCurrentDepartment(defaultDepartment?.departmentId);\r\n    }, [departments]);\r\n\r\n    useEffect(() => {\r\n        const setRandomImagesList = () => {\r\n            const imagesOnPage = 6;\r\n            const ids = [];\r\n            if (idsList && idsList[currentDepartment]) {\r\n                for (let i = 0; i < imagesOnPage; i++) {\r\n                    const randomIndex = Math.floor(\r\n                        Math.random() * idsList[currentDepartment].length\r\n                    );\r\n                    ids.push(idsList[currentDepartment][randomIndex]);\r\n                }\r\n                setCurrentIDsList(ids);\r\n            }\r\n        };\r\n\r\n        if (!currentIDsList.length || refresh) {\r\n            setRandomImagesList();\r\n            setRefresh(false);\r\n        }\r\n    }, [currentDepartment, idsList, refresh, currentIDsList]);\r\n\r\n    const handleRefresh = () => {\r\n        setRefresh(true);\r\n    };\r\n\r\n    const handleSetNewDepartment = async (newDepartment) => {\r\n        setIsLoading(true);\r\n        setCurrentDepartment(newDepartment);\r\n        if (!idsList[newDepartment]) {\r\n            const imageIDs = await fetchImagesListByDepartment(newDepartment);\r\n            idsList[newDepartment] = imageIDs;\r\n        }\r\n        setRefresh(true);\r\n        setIsLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className={styles.main}>\r\n            <WithLoader isLoading={!currentDepartment}>\r\n                <GallerySelector\r\n                    departments={departments}\r\n                    selected={currentDepartment}\r\n                    setDepartment={handleSetNewDepartment}\r\n                    setRefresh={handleRefresh}\r\n                />\r\n                <WithLoader isLoading={isLoading}>\r\n                    <div className={styles.gallery}>\r\n                        {currentIDsList.map((id, i) => (\r\n                            <GalleryCard id={id} key={i} />\r\n                        ))}\r\n                    </div>\r\n                </WithLoader>\r\n            </WithLoader>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Gallery;\r\n","import styles from \"./Header.module.scss\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div className={styles.header}>\r\n            <div className={styles.header__logo}>\r\n                <a href=\"https://github.com/Nokkup/art-gallery\" tabIndex={-1}>\r\n                    <img src=\"logo.svg\" alt=\"logo\" />\r\n                </a>\r\n            </div>\r\n            <h1 className={styles.header__title}>The Metropolitan Museum of Art Collection</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;","import styles from \"./Footer.module.scss\";\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className={styles.footer}>\r\n            <span className={styles.footer__year}>2021</span>\r\n            <a className={styles.footer__link} href=\"https://github.com/Nokkup/art-gallery\">Github link</a>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Footer;","import { useState, useEffect } from \"react\";\nimport { fetchDepartments, fetchImagesListByDepartment } from \"./api/api\";\nimport { getDefaultCategory } from \"./helpers\";\nimport styles from \"./App.module.scss\";\nimport Gallery from \"./components/Gallery/Gallery\";\nimport Header from \"./components/Header/Header\";\nimport Footer from \"./components/Footer/Footer\";\n\nconst App = () => {\n    const [departments, setDepartments] = useState([]);\n    const [listIDsByCategory, setlistIDsByCategory] = useState({});\n\n    useEffect(() => {\n        async function fetchData() {\n            const departments = await fetchDepartments();\n            const defaultCategory = getDefaultCategory(departments);\n            const imageIDs = await fetchImagesListByDepartment(\n                defaultCategory.departmentId\n            );\n\n            setDepartments(departments);\n            setlistIDsByCategory({ [defaultCategory.departmentId]: imageIDs });\n        }\n\n        fetchData();\n    }, []);\n\n    return (\n        <div className={styles.wrapper}>\n            <Header />\n            <Gallery idsList={listIDsByCategory} departments={departments} />\n            <Footer />\n        </div>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"Popup_popup__2INlt\",\"popup__body\":\"Popup_popup__body__1cjos\",\"popup__content\":\"Popup_popup__content__3Nail\",\"popup__close\":\"Popup_popup__close__1waVd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selector\":\"GallerySelector_selector__1_Q9J\",\"selector__select\":\"GallerySelector_selector__select__3Bmq7\",\"selector__button\":\"GallerySelector_selector__button__25QtI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__17K1E\",\"header__title\":\"Header_header__title__1r-TF\",\"header__logo\":\"Header_header__logo__1593e\"};"],"sourceRoot":""}